{% extends 'layout.njk' %}
{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}

{% set pageTitle = "Showing result for " ~ searchTerm %}

{% set latestView %}
{% include "./includes/search-result-latest.njk" %}
{% endset %}
{% set timelineView %}
{% include "./includes/search-result-timeline.njk" %}
{% endset %}

{% block content %}
  <div class="govuk-grid-row btms-search-results">
    <div class="govuk-grid-column-full">
      <div class="btms-heading-container">
        <h1 class="govuk-heading-l">
          <span class="govuk-caption-l">Showing result for</span>{{ searchTerm }}
        </h1>
      </div>
      {{ govukTabs({
        classes: 'btms-tabs',
        items: [
          {
            label: 'Latest',
            id: 'latest-view',
            panel: {
              html: latestView
            }
          },
          {
            label: 'Timeline',
            id: 'timeline-view',
            panel: {
              html: timelineView
            }
          }
        ]
      }) }}
    </div>
  </div>
{% endblock %}
{% block bodyEnd %}
  {{ super() }}
  <script src="{{ getAssetPath('searchResult.js') }}"></script>
  <script nonce="{{ cspNonce }}">
    BTMS.initFilters()
  </script>
{% endblock %}
